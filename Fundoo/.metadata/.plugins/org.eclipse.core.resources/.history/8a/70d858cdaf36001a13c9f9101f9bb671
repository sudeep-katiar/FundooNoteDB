package com.blblz.fundoonotes.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.blblz.fundoonotes.dto.NoteDto;
import com.blblz.fundoonotes.model.NoteModel;
import com.blblz.fundoonotes.responses.Response;
import com.blblz.fundoonotes.service.NoteService;

@RestController
@RequestMapping("/notes")
public class NoteController {
	
	@Autowired
	private NoteService noteservice;
	
	@PostMapping("/create")
	private ResponseEntity<Response> createNote(@RequestBody NoteDto notedto,@RequestParam String token) throws Exception {
		
		NoteModel note = noteservice.createNote(notedto, token);
		
		return ResponseEntity.status(HttpStatus.OK).body(new Response(200, "Note is created successfully", note));
		
	}
	
	@PostMapping("/deletenote")
	public ResponseEntity<Response> deleteNote(@RequestBody @RequestParam String token, @RequestParam long id) {
		
		int note = noteservice.deleteNote(token,id);
		return ResponseEntity.status(HttpStatus.OK).body(new Response(200, "Note is deleted successfully", note));
	}
	
	
	
}
